<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <!--[if lt IE 9]>
            <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
        <![endif]-->
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="robots" content="index, follow, all" />
        <meta name="Author" content="Extreme Sensio" />
        <meta name="Language" content="en"/>
        <meta name="Copyright" content="Sensio Labs" />
        <meta name="Publisher" content="Sensio Labs" />
        <meta name="Description" content="Symfony - Open-Source PHP web framework" />
        <meta name="Keywords" content="symfony2, symfony, project, framework, php, php5, open-source, components, symphony, symfony framework, symfony tutorial" />

        <link rel="search" type="application/opensearchdescription+xml" href="http://symfony.com/opensearch/documentation.xml" title="Symfony2 documentation" />

        <title>Controller (current) - Symfony</title>

                        <link rel="stylesheet" href="/css/compiled/all.css?v=3" />
                 <link href="https://connect.sensiolabs.com/css/sln.css" rel="stylesheet" type="text/css" media="all" />

                
                
                    <script type="text/javascript" src="/js/all.js?v=3"></script>
        
                
        <!--[if lt IE 9]>
          <script src="/js/common/html5.js" type="text/javascript"></script>
        <![endif]-->

        <!--[if IE 6]>
            <script src="/js/common/DD_belatedPNG_0.0.7a-min.js" type="text/javascript"></script>
            <script src="/js/common/ExtendDD_belatedPNG_0.0.7a.js" type="text/javascript"></script>
            <script type="text/javascript">
                DD_belatedPNG.fix('.png_fix');
            </script>
        <![endif]-->

        <script type="text/javascript">
          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-89393-6']);
          _gaq.push(['_trackPageview']);

          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
        </script>
    </head>

    <body>
        <div id="content_wrapper" class="">
            <div id="sln"></div>

            <div class="content">
                

    
<div class="header">
    <div class="content_header clear_fix">
        <div class="illustration_logo_header">
                            <a href="/"><img src="/images/common/logo/logo_symfony_header.png" alt="Symfony" class="png_fix" /></a>
                    </div>
        <div class="box_download clear_fix">
            <div class="legend_download">
                <img src="/images/en/a_sensiolabs_product.png" alt="a SensioLabs product" class="png_fix" />
            </div>
            <div class="download_button_wrapper">
                <a href="/download" class="download_button">    <span class="border_l png_fix">
        <span class="border_r png_fix">
            <span class="btn_bg png_fix">
                DOWNLOAD NOW
            </span>
        </span>
    </span>
</a>
            </div>
        </div>
    </div>
</div>

<div class="main_menu clear_fix" id="main_menu_id">
    <ul class="clear_fix">
        <li class="first what_is_symfony"><a href="/what-is-symfony">What is Symfony?</a></li>
        <li class="get_started">
            <a href="/get_started">Get started</a>
                    </li>
        <li class="learn selected"><a href="/doc/current/index.html">Documentation</a></li>
        <li class="community"><a href="/community">Community</a></li>
        <li class="services"><a href="/services">Services</a></li>
        <li class="blog">
            <a href="/blog/">News</a>
            <div class="box_dropdown_wrapper">
    <div class="border_l">
        <div class="middle_border_l">
            <div class="border_r">
                <div class="middle_border_r">
                    <div class="content_wrapper">
                        <div class="box_content">
                                <div class="inner_drop_box_two_columns clear_fix">
        <div class="inner_drop_box_two_columns_column_01">
            <h2 class="dropdown_title">
                <div class="button"><a href="http://twitter.com/symfony" title="twitter account"><img style="width: 35px; margin-top: -10px" src="/images/common/picto/twitter.png" alt="Twitter" /></a></div>
                <div class="button"><a href="http://feeds.feedburner.com/symfony/blog" title="blog feed"><img src="/images/common/picto/rss.gif" alt="feed" /></a></div>
                <a href="/blog/">Latest News</a>
            </h2>

            <div class="box_article post">
                    <div class="gravatar"><a href="https://connect.sensiolabs.com/api/alternates/4aed4f5d-e0cb-4320-902f-885fddaa7d15"><img width="57" height="57" src="https://connect.sensiolabs.com/api/images/4aed4f5d-e0cb-4320-902f-885fddaa7d15.png?format=57x57" alt="Fabien Potencier"></a></div>
                <h3 class="title_05"><a href="/blog/symfony-2-3-schedule-update">Symfony 2.3 schedule update</a></h3>
                <div class="complementaries_informations">
    by
            <a href="https://connect.sensiolabs.com/api/alternates/4aed4f5d-e0cb-4320-902f-885fddaa7d15">Fabien Potencier</a>
            – April 30, 2013
        </div>
            </div>

                <div class="box_hr"><hr /></div>


            <div class="box_article">
                <h2 class="title_05"><a href="/blog/a-week-of-symfony-330-22-28-april-2013">What happened last week in Symfony?</a></h2>
                <p>This week, it was announced that the Symfony 2.3 Standard Edition will only include MIT/BSD licensed libraries and bundles (<a href="https://github.com/symfony/symfony-standard/pull/535">view pull request</a>). In addition, Symfony 2.3 <a href="http://twitter.com/fabpot/status/327525715903905793">was declared nearly completed</a>, with just a few important PR remaining before the first beta version. Lastly, a new version of <a href="http://desktop.sensiolabs.org/">SensioLabs Desktop</a> was released.</p>
            </div>
        </div>
        <div class="inner_drop_box_two_columns_column_02">
            <h2 class="dropdown_title">
                <div class="button"><a href="http://twitter.com/symfony" title="twitter account"><img style="width: 35px; margin-top: -10px" src="/images/common/picto/twitter.png" alt="Twitter" /></a></div>
                <div class="button"><a href="http://feeds.feedburner.com/symfony/events" title="events rss"><img src="/images/common/picto/rss.gif" alt="RSS" /></a></div>
                <a href="/events/">Upcoming Events</a>
            </h2>

            <div class="box_article">
                <p>The Symfony Community organizes events all over the world on a regular basis. Here are the next ones.</p>
                                                            <h2 class="title_05">
                            <img src="/images/flags/de.png?v=3" />
                                                            <a href="http://www.meetup.com/sfugmd/events/113619892/">Germany, Gera &mdash; Symfony User Group Mitteldeutschland Treffen</a>
                                                    </h2>
                        <div class="event_detail">
                                                            on May 08, 2013, from 19:00 to 20:30
                                                    </div>
                                            <h2 class="title_05">
                            <img src="/images/flags/de.png?v=3" />
                                                            <a href="http://www.meetup.com/sfugcgn/events/104715432/">Germany, Köln &mdash; Treffen der Symfony User Group Cologne</a>
                                                    </h2>
                        <div class="event_detail">
                                                            on May 08, 2013, from 19:30 to 21:00
                                                    </div>
                                            <h2 class="title_05">
                            <img src="/images/flags/fr.png?v=3" />
                                                            <a href="http://sfpotparismai2013.eventbrite.fr/">France, Paris &mdash; sfPot Paris Mai - Formulaire et Tests</a>
                                                    </h2>
                        <div class="event_detail">
                                                            on May 14, 2013, from 19:30 to 21:00
                                                    </div>
                                            <h2 class="title_05">
                            <img src="/images/flags/us.png?v=3" />
                                                            <a href="http://portland2013.live.symfony.com/">United States, Portland &mdash; SymfonyLive Portland 2013</a>
                                                    </h2>
                        <div class="event_detail">
                                                            from May 20, 2013 to May 24, 2013
                                                    </div>
                                                </div>
        </div>
    </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="bottom">
        <div class="corner_l">
            <div class="corner_r">
                <div class="border"></div>
            </div>
        </div>
    </div>
</div>
        </li>
        <li class="last about"><a href="/about">About</a></li>
    </ul>
</div>

                                    <div class="main_content">
                                                    <div class="box_columns clear_fix">
                                                                                                            <div class="column_01">
                                                                                            <div class="submenu">
                                                    <ul class="list_submenu">    <li class="first selected"><a href="/doc/current/book/index.html">The Book</a></li>
<li><a href="/doc/current/cookbook/index.html">The Cookbook</a></li>
<li><a href="/doc/current/components/index.html">The Components</a></li>
<li><a href="/doc/current/reference/index.html">Reference</a></li>
<li><a href="/doc/current/glossary.html">Glossary</a></li>
<li><a href="/doc/current/genindex.html">Index</a></li>
<li><a href="/doc/current/bundles/index.html">Bundles</a></li>
<li><a href="/doc/master/cmf/index.html">Symfony CMF</a></li>
<li><a href="/doc/master/contributing/code/security.html#security-advisories">Security Advisories</a></li>
<li><a href="/legacy/doc">Docs for symfony 1.x</a></li>
<li><a href="/doc/current/contributing/index.html">Contributing</a></li>
<li><a href="/talks">Talks</a></li>
<li><a href="http://trainings.sensiolabs.com/">Trainings</a></li>
<li class="last"><a href="http://books.sensiolabs.com">Books</a></li>
</ul>
                                                </div>
                                                                        <div class="toc">
                <h2 class="title_05">Table of Contents</h2>
                <div class="toc-content">
                    <ul>
<li><a class="reference internal" href="#">Controller</a><ul>
<li><a class="reference internal" href="#requests-controller-response-lifecycle">Requests, Controller, Response Lifecycle</a></li>
<li><a class="reference internal" href="#a-simple-controller">A Simple Controller</a></li>
<li><a class="reference internal" href="#mapping-a-url-to-a-controller">Mapping a URL to a Controller</a><ul>
<li><a class="reference internal" href="#route-parameters-as-controller-arguments">Route Parameters as Controller Arguments</a></li>
<li><a class="reference internal" href="#the-request-as-a-controller-argument">The <tt class="docutils literal"><code>Request</code></tt> as a Controller Argument</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creating-static-pages">Creating Static Pages</a></li>
<li><a class="reference internal" href="#the-base-controller-class">The Base Controller Class</a></li>
<li><a class="reference internal" href="#common-controller-tasks">Common Controller Tasks</a><ul>
<li><a class="reference internal" href="#redirecting">Redirecting</a></li>
<li><a class="reference internal" href="#forwarding">Forwarding</a></li>
<li><a class="reference internal" href="#rendering-templates">Rendering Templates</a></li>
<li><a class="reference internal" href="#accessing-other-services">Accessing other Services</a></li>
</ul>
</li>
<li><a class="reference internal" href="#managing-errors-and-404-pages">Managing Errors and 404 Pages</a></li>
<li><a class="reference internal" href="#managing-the-session">Managing the Session</a><ul>
<li><a class="reference internal" href="#flash-messages">Flash Messages</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-response-object">The Response Object</a></li>
<li><a class="reference internal" href="#the-request-object">The Request Object</a></li>
<li><a class="reference internal" href="#final-thoughts">Final Thoughts</a></li>
<li><a class="reference internal" href="#learn-more-from-the-cookbook">Learn more from the Cookbook</a></li>
</ul>
</li>
</ul>

                </div>
            </div>
            
    <div class="feedback">
    <h2 class="title_05">Questions &amp; Feedback</h2>
    <p>
      <em>Found a typo or an error?</em><br />
      <em>Want to improve this document?</em> <a href="https://github.com/symfony/symfony-docs/edit/2.2/book/controller.rst">Edit</a> it.
    </p>
    <p>
      <em>Need support or have a technical question?</em><br />
      Post to the <a href="http://groups.google.com/group/symfony2">user mailing-list</a>.
     </p>
</div>
    <div id="license">
    <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
        <img alt="Creative Commons License" src="http://symfony.com/images/license.png" />
    </a>
    <div>
        This <span xmlns:dc="http://purl.org/dc/elements/1.1/" href="http://purl.org/dc/dcmitype/MovingImage" rel="dc:type">work</span> is licensed under a
        <br />
        Creative Commons
        <br />
        Attribution-Share Alike 3.0
        <br />
        Unported <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">License</a>.
    </div>
</div>
                                                                                                    
<div class="ads">
        <div class="box_hr"><hr /></div>


            <div class="ad" id="ad_trainings_1">
            <h3><a href="http://trainings.sensiolabs.com/en/training/getting-started-with-symfony2">Master Symfony2 fundamentals</a></h3>
            <div>Be trained by SensioLabs experts (2 to 6 day sessions -- French or English).</div>
            <div><cite>trainings.sensiolabs.com</cite></div>
        </div>
            <div class="ad" id="ad_servergrove_1">
            <h3><a href="http://symfony.com/servergrove">Symfony hosting done right</a></h3>
            <div>ServerGrove, outstanding support at the right price for your Symfony hosting needs.</div>
            <div><cite>servergrove.com</cite></div>
        </div>
            <div class="ad" id="ad_support_1">
            <h3><a href="http://sensiolabs.com/en/support/sensiolabs_support.html">Discover the SensioLabs Support</a></h3>
            <div>Access to the SensioLabs Competency Center for an exclusive and tailor-made support on Symfony</div>
            <div><cite>sensiolabs.com</cite></div>
        </div>
    </div>

<script type="text/javascript">
    $(document).ready(function () {
                    $("#ad_trainings_1").click(function () { _gaq.push(['_trackEvent', 'Ads', 'Ads', 'trainings_1']); });
                    $("#ad_servergrove_1").click(function () { _gaq.push(['_trackEvent', 'Ads', 'Ads', 'servergrove_1']); });
                    $("#ad_support_1").click(function () { _gaq.push(['_trackEvent', 'Ads', 'Ads', 'support_1']); });
            });
</script>
                                                                                                                                                    <div class="ads">
                                                        <a href="https://connect.sensiolabs.com/"><img src="/images/sensiolabs_connect.png?v=3" /></a>
                                                    </div>
                                                                                                                                    </div>
                                                                        <div class="column_02">
                                                                                    <div class="breadcrumb">
                                                <a href="/">Home</a> &raquo;
                                                            <a href="/doc/current/index.html">Documentation</a> &raquo;
    
            <a href="index.html" accesskey="U">The Book</a> &raquo;
    
    Controller
                                            </div>

                                                                                                <div class="box_title">
                                                        <div class="box_version_wrapper">
        <div class="version_wrapper">
            <div class="version">
                2.2 version
                <span class="arrow">
                    <img src="/images/common/picto/down_arrow_white.png" alt="" />
                </span>
            </div>
            <div class="other_version">
                                    <ul>
                                                                                    <li>
                                    <a href="/doc/2.0/book/controller.html">2.0 version</a>
                                </li>
                                                                                                                <li>
                                    <a href="/doc/2.1/book/controller.html">2.1 version</a>
                                </li>
                                                                                                                                                                    <li>
                                    <a href="/doc/master/book/controller.html">master version</a>
                                </li>
                                                                        </ul>
                                                                            <hr />
                                        <ul>
                                                                                    <li>
                                    <a href="/fr/doc/current/book/controller.html">French</a>
                                </li>
                                                                                                                <li>
                                    <a href="/it/doc/current/book/controller.html">Italian</a>
                                </li>
                                                                        </ul>
                            </div>
        </div>
    </div>
                                                    <h1 class="title_01">Controller</h1>
                                                </div>
                                            
        
                                                
    <div class="box_article doc_page">
        <div class="section" id="controller">
<span id="index-0"></span><h1>Controller<a class="headerlink" href="#controller" title="Permalink to this headline">¶</a></h1>
<p>A controller is a PHP function you create that takes information from the
HTTP request and constructs and returns an HTTP response (as a Symfony2
<tt class="docutils literal"><code>Response</code></tt> object). The response could be an HTML page, an XML document,
a serialized JSON array, an image, a redirect, a 404 error or anything else
you can dream up. The controller contains whatever arbitrary logic <em>your
application</em> needs to render the content of a page.</p>
<p>See how simple this is by looking at a Symfony2 controller in action.
The following controller would render a page that simply prints <tt class="docutils literal"><code>Hello world!</code></tt>:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">helloAction</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s1">&#39;Hello world!&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>The goal of a controller is always the same: create and return a <tt class="docutils literal"><code>Response</code></tt>
object. Along the way, it might read information from the request, load a
database resource, send an email, or set information on the user's session.
But in all cases, the controller will eventually return the <tt class="docutils literal"><code>Response</code></tt> object
that will be delivered back to the client.</p>
<p>There's no magic and no other requirements to worry about! Here are a few
common examples:</p>
<ul class="simple">
<li><em>Controller A</em> prepares a <tt class="docutils literal"><code>Response</code></tt> object representing the content
for the homepage of the site.</li>
<li><em>Controller B</em> reads the <tt class="docutils literal"><code>slug</code></tt> parameter from the request to load a
blog entry from the database and create a <tt class="docutils literal"><code>Response</code></tt> object displaying
that blog. If the <tt class="docutils literal"><code>slug</code></tt> can't be found in the database, it creates and
returns a <tt class="docutils literal"><code>Response</code></tt> object with a 404 status code.</li>
<li><em>Controller C</em> handles the form submission of a contact form. It reads
the form information from the request, saves the contact information to
the database and emails the contact information to the webmaster. Finally,
it creates a <tt class="docutils literal"><code>Response</code></tt> object that redirects the client's browser to
the contact form &quot;thank you&quot; page.</li>
</ul>
<div class="section" id="requests-controller-response-lifecycle">
<span id="index-1"></span><h2>Requests, Controller, Response Lifecycle<a class="headerlink" href="#requests-controller-response-lifecycle" title="Permalink to this headline">¶</a></h2>
<p>Every request handled by a Symfony2 project goes through the same simple lifecycle.
The framework takes care of the repetitive tasks and ultimately executes a
controller, which houses your custom application code:</p>
<ol class="arabic simple">
<li>Each request is handled by a single front controller file (e.g. <tt class="docutils literal"><code>app.php</code></tt>
or <tt class="docutils literal"><code>app_dev.php</code></tt>) that bootstraps the application;</li>
<li>The <tt class="docutils literal"><code>Router</code></tt> reads information from the request (e.g. the URI), finds
a route that matches that information, and reads the <tt class="docutils literal"><code>_controller</code></tt> parameter
from the route;</li>
<li>The controller from the matched route is executed and the code inside the
controller creates and returns a <tt class="docutils literal"><code>Response</code></tt> object;</li>
<li>The HTTP headers and content of the <tt class="docutils literal"><code>Response</code></tt> object are sent back to
the client.</li>
</ol>
<p>Creating a page is as easy as creating a controller (#3) and making a route that
maps a URL to that controller (#2).</p>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">Though similarly named, a &quot;front controller&quot; is different from the
&quot;controllers&quot; talked about in this chapter. A front controller
is a short PHP file that lives in your web directory and through which
all requests are directed. A typical application will have a production
front controller (e.g. <tt class="docutils literal"><code>app.php</code></tt>) and a development front controller
(e.g. <tt class="docutils literal"><code>app_dev.php</code></tt>). You'll likely never need to edit, view or worry
about the front controllers in your application.</p>
</div></div>
</div>
<div class="section" id="a-simple-controller">
<span id="index-2"></span><h2>A Simple Controller<a class="headerlink" href="#a-simple-controller" title="Permalink to this headline">¶</a></h2>
<p>While a controller can be any PHP callable (a function, method on an object,
or a <tt class="docutils literal"><code>Closure</code></tt>), in Symfony2, a controller is usually a single method inside
a controller object. Controllers are also called <em>actions</em>.</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// src/Acme/HelloBundle/Controller/HelloController.php</span>
<span class="k">namespace</span> <span class="nx">Acme\HelloBundle\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">HelloController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s1">&#39;&lt;html&gt;&lt;body&gt;Hello &#39;</span><span class="o">.</span><span class="nv">$name</span><span class="o">.</span><span class="s1">&#39;!&lt;/body&gt;&lt;/html&gt;&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<div class="admonition-wrapper">
<div class="tip"></div><div class="admonition admonition-tip"><p class="first admonition-title">Tip</p>
<p class="last">Note that the <em>controller</em> is the <tt class="docutils literal"><code>indexAction</code></tt> method, which lives
inside a <em>controller class</em> (<tt class="docutils literal"><code>HelloController</code></tt>). Don't be confused
by the naming: a <em>controller class</em> is simply a convenient way to group
several controllers/actions together. Typically, the controller class
will house several controllers/actions (e.g. <tt class="docutils literal"><code>updateAction</code></tt>, <tt class="docutils literal"><code>deleteAction</code></tt>,
etc).</p>
</div></div>
<p>This controller is pretty straightforward:</p>
<ul class="simple">
<li><em>line 4</em>: Symfony2 takes advantage of PHP 5.3 namespace functionality to
namespace the entire controller class. The <tt class="docutils literal"><code>use</code></tt> keyword imports the
<tt class="docutils literal"><code>Response</code></tt> class, which the controller must return.</li>
<li><em>line 6</em>: The class name is the concatenation of a name for the controller
class (i.e. <tt class="docutils literal"><code>Hello</code></tt>) and the word <tt class="docutils literal"><code>Controller</code></tt>. This is a convention
that provides consistency to controllers and allows them to be referenced
only by the first part of the name (i.e. <tt class="docutils literal"><code>Hello</code></tt>) in the routing configuration.</li>
<li><em>line 8</em>: Each action in a controller class is suffixed with <tt class="docutils literal"><code>Action</code></tt>
and is referenced in the routing configuration by the action's name (<tt class="docutils literal"><code>index</code></tt>).
In the next section, you'll create a route that maps a URI to this action.
You'll learn how the route's placeholders (<tt class="docutils literal"><code>{name}</code></tt>) become arguments
to the action method (<tt class="docutils literal"><code>$name</code></tt>).</li>
<li><em>line 10</em>: The controller creates and returns a <tt class="docutils literal"><code>Response</code></tt> object.</li>
</ul>
</div>
<div class="section" id="mapping-a-url-to-a-controller">
<span id="index-3"></span><h2>Mapping a URL to a Controller<a class="headerlink" href="#mapping-a-url-to-a-controller" title="Permalink to this headline">¶</a></h2>
<p>The new controller returns a simple HTML page. To actually view this page
in your browser, you need to create a route, which maps a specific URL path
to the controller:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># app/config/routing.yml</span>
<span class="l-Scalar-Plain">hello</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span>      <span class="l-Scalar-Plain">/hello/{name}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span>  <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeHelloBundle</span><span class="p-Indicator">:</span><span class="nv">Hello</span><span class="p-Indicator">:</span><span class="nv">index</span> <span class="p-Indicator">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>XML</em><div class="literal-block"><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">&lt;!-- app/config/routing.xml --&gt;</span>
<span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;hello&quot;</span> <span class="na">path=</span><span class="s">&quot;/hello/{name}&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeHelloBundle:Hello:index<span class="nt">&lt;/default&gt;</span>
<span class="nt">&lt;/route&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>PHP</em><div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// app/config/routing.php</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/hello/{name}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeHelloBundle:Hello:index&#39;</span><span class="p">,</span>
<span class="p">)));</span>
</pre></div>
</td></tr></table></div></div>
</li>
</ul>
</div>
<p>Going to <tt class="docutils literal"><code>/hello/ryan</code></tt> now executes the <tt class="docutils literal"><code>HelloController::indexAction()</code></tt>
controller and passes in <tt class="docutils literal"><code>ryan</code></tt> for the <tt class="docutils literal"><code>$name</code></tt> variable. Creating a
&quot;page&quot; means simply creating a controller method and associated route.</p>
<p>Notice the syntax used to refer to the controller: <tt class="docutils literal"><code>AcmeHelloBundle:Hello:index</code></tt>.
Symfony2 uses a flexible string notation to refer to different controllers.
This is the most common syntax and tells Symfony2 to look for a controller
class called <tt class="docutils literal"><code>HelloController</code></tt> inside a bundle named <tt class="docutils literal"><code>AcmeHelloBundle</code></tt>. The
method <tt class="docutils literal"><code>indexAction()</code></tt> is then executed.</p>
<p>For more details on the string format used to reference different controllers,
see <a class="reference internal" href="routing.html#controller-string-syntax"><em>Controller Naming Pattern</em></a>.</p>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">This example places the routing configuration directly in the <tt class="docutils literal"><code>app/config/</code></tt>
directory. A better way to organize your routes is to place each route
in the bundle it belongs to. For more information on this, see
<a class="reference internal" href="routing.html#routing-include-external-resources"><em>Including External Routing Resources</em></a>.</p>
</div></div>
<div class="admonition-wrapper">
<div class="tip"></div><div class="admonition admonition-tip"><p class="first admonition-title">Tip</p>
<p class="last">You can learn much more about the routing system in the <a class="reference internal" href="routing.html"><em>Routing chapter</em></a>.</p>
</div></div>
<div class="section" id="route-parameters-as-controller-arguments">
<span id="route-parameters-controller-arguments"></span><span id="index-4"></span><h3>Route Parameters as Controller Arguments<a class="headerlink" href="#route-parameters-as-controller-arguments" title="Permalink to this headline">¶</a></h3>
<p>You already know that the <tt class="docutils literal"><code>_controller</code></tt> parameter <tt class="docutils literal"><code>AcmeHelloBundle:Hello:index</code></tt>
refers to a <tt class="docutils literal"><code>HelloController::indexAction()</code></tt> method that lives inside the
<tt class="docutils literal"><code>AcmeHelloBundle</code></tt> bundle. What's more interesting is the arguments that are
passed to that method:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// src/Acme/HelloBundle/Controller/HelloController.php</span>
<span class="k">namespace</span> <span class="nx">Acme\HelloBundle\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">HelloController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>The controller has a single argument, <tt class="docutils literal"><code>$name</code></tt>, which corresponds to the
<tt class="docutils literal"><code>{name}</code></tt> parameter from the matched route (<tt class="docutils literal"><code>ryan</code></tt> in the example). In
fact, when executing your controller, Symfony2 matches each argument of
the controller with a parameter from the matched route. Take the following
example:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># app/config/routing.yml</span>
<span class="l-Scalar-Plain">hello</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span>      <span class="l-Scalar-Plain">/hello/{first_name}/{last_name}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span>  <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeHelloBundle</span><span class="p-Indicator">:</span><span class="nv">Hello</span><span class="p-Indicator">:</span><span class="nv">index</span><span class="p-Indicator">,</span> <span class="nv">color</span><span class="p-Indicator">:</span> <span class="nv">green</span> <span class="p-Indicator">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>XML</em><div class="literal-block"><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">&lt;!-- app/config/routing.xml --&gt;</span>
<span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;hello&quot;</span> <span class="na">path=</span><span class="s">&quot;/hello/{first_name}/{last_name}&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeHelloBundle:Hello:index<span class="nt">&lt;/default&gt;</span>
    <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;color&quot;</span><span class="nt">&gt;</span>green<span class="nt">&lt;/default&gt;</span>
<span class="nt">&lt;/route&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>PHP</em><div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// app/config/routing.php</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/hello/{first_name}/{last_name}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeHelloBundle:Hello:index&#39;</span><span class="p">,</span>
    <span class="s1">&#39;color&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
<span class="p">)));</span>
</pre></div>
</td></tr></table></div></div>
</li>
</ul>
</div>
<p>The controller for this can take several arguments:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nv">$first_name</span><span class="p">,</span> <span class="nv">$last_name</span><span class="p">,</span> <span class="nv">$color</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Notice that both placeholder variables (<tt class="docutils literal"><code>{first_name}</code></tt>, <tt class="docutils literal"><code>{last_name}</code></tt>)
as well as the default <tt class="docutils literal"><code>color</code></tt> variable are available as arguments in the
controller. When a route is matched, the placeholder variables are merged
with the <tt class="docutils literal"><code>defaults</code></tt> to make one array that's available to your controller.</p>
<p>Mapping route parameters to controller arguments is easy and flexible. Keep
the following guidelines in mind while you develop.</p>
<ul>
<li><p class="first"><strong>The order of the controller arguments does not matter</strong></p>
<blockquote>
<div><p>Symfony is able to match the parameter names from the route to the variable
names in the controller method's signature. In other words, it realizes that
the <tt class="docutils literal"><code>{last_name}</code></tt> parameter matches up with the <tt class="docutils literal"><code>$last_name</code></tt> argument.
The arguments of the controller could be totally reordered and still work
perfectly:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nv">$last_name</span><span class="p">,</span> <span class="nv">$color</span><span class="p">,</span> <span class="nv">$first_name</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</div></blockquote>
</li>
<li><p class="first"><strong>Each required controller argument must match up with a routing parameter</strong></p>
<blockquote>
<div><p>The following would throw a <tt class="docutils literal"><code>RuntimeException</code></tt> because there is no <tt class="docutils literal"><code>foo</code></tt>
parameter defined in the route:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nv">$first_name</span><span class="p">,</span> <span class="nv">$last_name</span><span class="p">,</span> <span class="nv">$color</span><span class="p">,</span> <span class="nv">$foo</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Making the argument optional, however, is perfectly ok. The following
example would not throw an exception:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nv">$first_name</span><span class="p">,</span> <span class="nv">$last_name</span><span class="p">,</span> <span class="nv">$color</span><span class="p">,</span> <span class="nv">$foo</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</div></blockquote>
</li>
<li><p class="first"><strong>Not all routing parameters need to be arguments on your controller</strong></p>
<blockquote>
<div><p>If, for example, the <tt class="docutils literal"><code>last_name</code></tt> weren't important for your controller,
you could omit it entirely:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nv">$first_name</span><span class="p">,</span> <span class="nv">$color</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</div></blockquote>
</li>
</ul>
<div class="admonition-wrapper">
<div class="tip"></div><div class="admonition admonition-tip"><p class="first admonition-title">Tip</p>
<p class="last">Every route also has a special <tt class="docutils literal"><code>_route</code></tt> parameter, which is equal to
the name of the route that was matched (e.g. <tt class="docutils literal"><code>hello</code></tt>). Though not usually
useful, this is equally available as a controller argument.</p>
</div></div>
</div>
<div class="section" id="the-request-as-a-controller-argument">
<span id="book-controller-request-argument"></span><h3>The <tt class="docutils literal"><code>Request</code></tt> as a Controller Argument<a class="headerlink" href="#the-request-as-a-controller-argument" title="Permalink to this headline">¶</a></h3>
<p>For convenience, you can also have Symfony pass you the <tt class="docutils literal"><code>Request</code></tt> object
as an argument to your controller. This is especially convenient when you're
working with forms, for example:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Request</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">updateAction</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$form</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createForm</span><span class="p">(</span><span class="o">...</span><span class="p">);</span>

    <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">bind</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</div>
</div>
<div class="section" id="creating-static-pages">
<span id="index-5"></span><h2>Creating Static Pages<a class="headerlink" href="#creating-static-pages" title="Permalink to this headline">¶</a></h2>
<p>You can create a static page without even creating a controller (only a route
and template are needed).</p>
<p>Use it! See <a class="reference internal" href="../cookbook/templating/render_without_controller.html"><em>How to render a Template without a custom Controller</em></a>.</p>
</div>
<div class="section" id="the-base-controller-class">
<h2>The Base Controller Class<a class="headerlink" href="#the-base-controller-class" title="Permalink to this headline">¶</a></h2>
<p>For convenience, Symfony2 comes with a base <tt class="docutils literal"><code>Controller</code></tt> class that assists
with some of the most common controller tasks and gives your controller class
access to any resource it might need. By extending this <tt class="docutils literal"><code>Controller</code></tt> class,
you can take advantage of several helper methods.</p>
<p>Add the <tt class="docutils literal"><code>use</code></tt> statement atop the <tt class="docutils literal"><code>Controller</code></tt> class and then modify the
<tt class="docutils literal"><code>HelloController</code></tt> to extend it:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// src/Acme/HelloBundle/Controller/HelloController.php</span>
<span class="k">namespace</span> <span class="nx">Acme\HelloBundle\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\Controller</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">HelloController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s1">&#39;&lt;html&gt;&lt;body&gt;Hello &#39;</span><span class="o">.</span><span class="nv">$name</span><span class="o">.</span><span class="s1">&#39;!&lt;/body&gt;&lt;/html&gt;&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>This doesn't actually change anything about how your controller works. In
the next section, you'll learn about the helper methods that the base controller
class makes available. These methods are just shortcuts to using core Symfony2
functionality that's available to you with or without the use of the base
<tt class="docutils literal"><code>Controller</code></tt> class. A great way to see the core functionality in action
is to look in the
<tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/2.2/Symfony/Bundle/FrameworkBundle/Controller/Controller.html" title="Symfony\Bundle\FrameworkBundle\Controller\Controller">Controller</a></code></tt> class
itself.</p>
<div class="admonition-wrapper">
<div class="tip"></div><div class="admonition admonition-tip"><p class="first admonition-title">Tip</p>
<p class="last">Extending the base class is <em>optional</em> in Symfony; it contains useful
shortcuts but nothing mandatory. You can also extend
<tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/2.2/Symfony/Component/DependencyInjection/ContainerAware.html" title="Symfony\Component\DependencyInjection\ContainerAware">ContainerAware</a></code></tt>. The service
container object will then be accessible via the <tt class="docutils literal"><code>container</code></tt> property.</p>
</div></div>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">You can also define your <a class="reference internal" href="../cookbook/controller/service.html"><em>Controllers as Services</em></a>.</p>
</div></div>
</div>
<div class="section" id="common-controller-tasks">
<span id="index-6"></span><h2>Common Controller Tasks<a class="headerlink" href="#common-controller-tasks" title="Permalink to this headline">¶</a></h2>
<p>Though a controller can do virtually anything, most controllers will perform
the same basic tasks over and over again. These tasks, such as redirecting,
forwarding, rendering templates and accessing core services, are very easy
to manage in Symfony2.</p>
<div class="section" id="redirecting">
<span id="index-7"></span><h3>Redirecting<a class="headerlink" href="#redirecting" title="Permalink to this headline">¶</a></h3>
<p>If you want to redirect the user to another page, use the <tt class="docutils literal"><code>redirect()</code></tt> method:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">generateUrl</span><span class="p">(</span><span class="s1">&#39;homepage&#39;</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>The <tt class="docutils literal"><code>generateUrl()</code></tt> method is just a helper function that generates the URL
for a given route. For more information, see the <a class="reference internal" href="routing.html"><em>Routing</em></a>
chapter.</p>
<p>By default, the <tt class="docutils literal"><code>redirect()</code></tt> method performs a 302 (temporary) redirect. To
perform a 301 (permanent) redirect, modify the second argument:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">generateUrl</span><span class="p">(</span><span class="s1">&#39;homepage&#39;</span><span class="p">),</span> <span class="mi">301</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<div class="admonition-wrapper">
<div class="tip"></div><div class="admonition admonition-tip"><p class="first admonition-title">Tip</p>
<p>The <tt class="docutils literal"><code>redirect()</code></tt> method is simply a shortcut that creates a <tt class="docutils literal"><code>Response</code></tt>
object that specializes in redirecting the user. It's equivalent to:</p>
<div class="literal-block"><div class="last highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\RedirectResponse</span><span class="p">;</span>

<span class="k">return</span> <span class="k">new</span> <span class="nx">RedirectResponse</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">generateUrl</span><span class="p">(</span><span class="s1">&#39;homepage&#39;</span><span class="p">));</span>
</pre></div>
</td></tr></table></div></div>
</div></div>
</div>
<div class="section" id="forwarding">
<span id="index-8"></span><h3>Forwarding<a class="headerlink" href="#forwarding" title="Permalink to this headline">¶</a></h3>
<p>You can also easily forward to another controller internally with the <tt class="docutils literal"><code>forward()</code></tt>
method. Instead of redirecting the user's browser, it makes an internal sub-request,
and calls the specified controller. The <tt class="docutils literal"><code>forward()</code></tt> method returns the <tt class="docutils literal"><code>Response</code></tt>
object that's returned from that controller:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">forward</span><span class="p">(</span><span class="s1">&#39;AcmeHelloBundle:Hello:fancy&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;name&#39;</span>  <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">,</span>
        <span class="s1">&#39;color&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
    <span class="p">));</span>

    <span class="c1">// ... further modify the response or return it directly</span>

    <span class="k">return</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Notice that the <cite>forward()</cite> method uses the same string representation of
the controller used in the routing configuration. In this case, the target
controller class will be <tt class="docutils literal"><code>HelloController</code></tt> inside some <tt class="docutils literal"><code>AcmeHelloBundle</code></tt>.
The array passed to the method becomes the arguments on the resulting controller.
This same interface is used when embedding controllers into templates (see
<a class="reference internal" href="templating.html#templating-embedding-controller"><em>Embedding Controllers</em></a>). The target controller method should
look something like the following:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">fancyAction</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$color</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ... create and return a Response object</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>And just like when creating a controller for a route, the order of the arguments
to <tt class="docutils literal"><code>fancyAction</code></tt> doesn't matter. Symfony2 matches the index key names
(e.g. <tt class="docutils literal"><code>name</code></tt>) with the method argument names (e.g. <tt class="docutils literal"><code>$name</code></tt>). If you
change the order of the arguments, Symfony2 will still pass the correct
value to each variable.</p>
<div class="admonition-wrapper">
<div class="tip"></div><div class="admonition admonition-tip"><p class="first admonition-title">Tip</p>
<p>Like other base <tt class="docutils literal"><code>Controller</code></tt> methods, the <tt class="docutils literal"><code>forward</code></tt> method is just
a shortcut for core Symfony2 functionality. A forward can be accomplished
directly via the <tt class="docutils literal"><code>http_kernel</code></tt> service. A forward returns a <tt class="docutils literal"><code>Response</code></tt>
object:</p>
<div class="literal-block"><div class="last highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$httpKernel</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">container</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;http_kernel&#39;</span><span class="p">);</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nv">$httpKernel</span><span class="o">-&gt;</span><span class="na">forward</span><span class="p">(</span>
    <span class="s1">&#39;AcmeHelloBundle:Hello:fancy&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;name&#39;</span>  <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">,</span>
        <span class="s1">&#39;color&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</td></tr></table></div></div>
</div></div>
</div>
<div class="section" id="rendering-templates">
<span id="controller-rendering-templates"></span><span id="index-9"></span><h3>Rendering Templates<a class="headerlink" href="#rendering-templates" title="Permalink to this headline">¶</a></h3>
<p>Though not a requirement, most controllers will ultimately render a template
that's responsible for generating the HTML (or other format) for the controller.
The <tt class="docutils literal"><code>renderView()</code></tt> method renders a template and returns its content. The
content from the template can be used to create a <tt class="docutils literal"><code>Response</code></tt> object:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="nv">$content</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">renderView</span><span class="p">(</span>
    <span class="s1">&#39;AcmeHelloBundle:Hello:index.html.twig&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="nv">$content</span><span class="p">);</span>
</pre></div>
</td></tr></table></div></div>
<p>This can even be done in just one step with the <tt class="docutils literal"><code>render()</code></tt> method, which
returns a <tt class="docutils literal"><code>Response</code></tt> object containing the content from the template:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span>
    <span class="s1">&#39;AcmeHelloBundle:Hello:index.html.twig&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</td></tr></table></div></div>
<p>In both cases, the <tt class="docutils literal"><code>Resources/views/Hello/index.html.twig</code></tt> template inside
the <tt class="docutils literal"><code>AcmeHelloBundle</code></tt> will be rendered.</p>
<p>The Symfony templating engine is explained in great detail in the
<a class="reference internal" href="templating.html"><em>Templating</em></a> chapter.</p>
<div class="admonition-wrapper">
<div class="tip"></div><div class="admonition admonition-tip"><p class="first admonition-title">Tip</p>
<p class="last">You can even avoid calling the <tt class="docutils literal"><code>render</code></tt> method by using the <tt class="docutils literal"><code>&#64;Template</code></tt>
annotation. See the <a class="reference internal" href="../bundles/SensioFrameworkExtraBundle/annotations/view.html"><em>FrameworkExtraBundle documentation</em></a>
more details.</p>
</div></div>
<div class="admonition-wrapper">
<div class="tip"></div><div class="admonition admonition-tip"><p class="first admonition-title">Tip</p>
<p>The <tt class="docutils literal"><code>renderView</code></tt> method is a shortcut to direct use of the <tt class="docutils literal"><code>templating</code></tt>
service. The <tt class="docutils literal"><code>templating</code></tt> service can also be used directly:</p>
<div class="literal-block"><div class="last highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$templating</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;templating&#39;</span><span class="p">);</span>
<span class="nv">$content</span> <span class="o">=</span> <span class="nv">$templating</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span>
    <span class="s1">&#39;AcmeHelloBundle:Hello:index.html.twig&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</td></tr></table></div></div>
</div></div>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p>It is possible to render templates in deeper subdirectories as well, however
be careful to avoid the pitfall of making your directory structure unduly
elaborate:</p>
<div class="literal-block"><div class="last highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$templating</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span>
    <span class="s1">&#39;AcmeHelloBundle:Hello/Greetings:index.html.twig&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">)</span>
<span class="p">);</span>
<span class="c1">// index.html.twig found in Resources/views/Hello/Greetings is rendered.</span>
</pre></div>
</td></tr></table></div></div>
</div></div>
</div>
<div class="section" id="accessing-other-services">
<span id="index-10"></span><h3>Accessing other Services<a class="headerlink" href="#accessing-other-services" title="Permalink to this headline">¶</a></h3>
<p>When extending the base controller class, you can access any Symfony2 service
via the <tt class="docutils literal"><code>get()</code></tt> method. Here are several common services you might need:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$request</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getRequest</span><span class="p">();</span>

<span class="nv">$templating</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;templating&#39;</span><span class="p">);</span>

<span class="nv">$router</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;router&#39;</span><span class="p">);</span>

<span class="nv">$mailer</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;mailer&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div></div>
<p>There are countless other services available and you are encouraged to define
your own. To list all available services, use the <tt class="docutils literal"><code>container:debug</code></tt> console
command:</p>
<div class="literal-block"><div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$ </span>php app/console container:debug
</pre></div>
</td></tr></table></div></div>
<p>For more information, see the <a class="reference internal" href="service_container.html"><em>Service Container</em></a> chapter.</p>
</div>
</div>
<div class="section" id="managing-errors-and-404-pages">
<span id="index-11"></span><h2>Managing Errors and 404 Pages<a class="headerlink" href="#managing-errors-and-404-pages" title="Permalink to this headline">¶</a></h2>
<p>When things are not found, you should play well with the HTTP protocol and
return a 404 response. To do this, you'll throw a special type of exception.
If you're extending the base controller class, do the following:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// retrieve the object from database</span>
    <span class="nv">$product</span> <span class="o">=</span> <span class="o">...</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$product</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createNotFoundException</span><span class="p">(</span><span class="s1">&#39;The product does not exist&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="o">...</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>The <tt class="docutils literal"><code>createNotFoundException()</code></tt> method creates a special <tt class="docutils literal"><code>NotFoundHttpException</code></tt>
object, which ultimately triggers a 404 HTTP response inside Symfony.</p>
<p>Of course, you're free to throw any <tt class="docutils literal"><code>Exception</code></tt> class in your controller -
Symfony2 will automatically return a 500 HTTP response code.</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">throw</span> <span class="k">new</span> <span class="nx">\Exception</span><span class="p">(</span><span class="s1">&#39;Something went wrong!&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div></div>
<p>In every case, a styled error page is shown to the end user and a full debug
error page is shown to the developer (when viewing the page in debug mode).
Both of these error pages can be customized. For details, read the
&quot;<a class="reference internal" href="../cookbook/controller/error_pages.html"><em>How to customize Error Pages</em></a>&quot; cookbook recipe.</p>
</div>
<div class="section" id="managing-the-session">
<span id="index-12"></span><h2>Managing the Session<a class="headerlink" href="#managing-the-session" title="Permalink to this headline">¶</a></h2>
<p>Symfony2 provides a nice session object that you can use to store information
about the user (be it a real person using a browser, a bot, or a web service)
between requests. By default, Symfony2 stores the attributes in a cookie
by using the native PHP sessions.</p>
<p>Storing and retrieving information from the session can be easily achieved
from any controller:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$session</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getRequest</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getSession</span><span class="p">();</span>

<span class="c1">// store an attribute for reuse during a later user request</span>
<span class="nv">$session</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">);</span>

<span class="c1">// in another controller for another request</span>
<span class="nv">$foo</span> <span class="o">=</span> <span class="nv">$session</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">);</span>

<span class="c1">// use a default value if the key doesn&#39;t exist</span>
<span class="nv">$filters</span> <span class="o">=</span> <span class="nv">$session</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;filters&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">());</span>
</pre></div>
</td></tr></table></div></div>
<p>These attributes will remain on the user for the remainder of that user's
session.</p>
<div class="section" id="flash-messages">
<span id="index-13"></span><h3>Flash Messages<a class="headerlink" href="#flash-messages" title="Permalink to this headline">¶</a></h3>
<p>You can also store small messages that will be stored on the user's session
for exactly one additional request. This is useful when processing a form:
you want to redirect and have a special message shown on the <em>next</em> request.
These types of messages are called &quot;flash&quot; messages.</p>
<p>For example, imagine you're processing a form submit:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">updateAction</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$form</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createForm</span><span class="p">(</span><span class="o">...</span><span class="p">);</span>

    <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">bind</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getRequest</span><span class="p">());</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">isValid</span><span class="p">())</span> <span class="p">{</span>
        <span class="c1">// do some sort of processing</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;session&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">getFlashBag</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;notice&#39;</span><span class="p">,</span> <span class="s1">&#39;Your changes were saved!&#39;</span><span class="p">);</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">generateUrl</span><span class="p">(</span><span class="o">...</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="o">...</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>After processing the request, the controller sets a <tt class="docutils literal"><code>notice</code></tt> flash message
and then redirects. The name (<tt class="docutils literal"><code>notice</code></tt>) isn't significant - it's just what
you're using to identify the type of the message.</p>
<p>In the template of the next action, the following code could be used to render
the <tt class="docutils literal"><code>notice</code></tt> message:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="literal-block"><div class="highlight-html+jinja"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">for</span> <span class="nv">flashMessage</span> <span class="k">in</span> <span class="nv">app.session.flashbag.get</span><span class="o">(</span><span class="s1">&#39;notice&#39;</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;flash-notice&quot;</span><span class="nt">&gt;</span>
        <span class="cp">{{</span> <span class="nv">flashMessage</span> <span class="cp">}}</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>PHP</em><div class="literal-block"><div class="highlight-html+php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;session&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">getFlashBag</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;notice&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;flash-notice&quot;</span><span class="nt">&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="s2">&quot;&lt;div class=&#39;flash-error&#39;&gt;</span><span class="si">$message</span><span class="s2">&lt;/div&gt;&quot;</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
</ul>
</div>
<p>By design, flash messages are meant to live for exactly one request (they're
&quot;gone in a flash&quot;). They're designed to be used across redirects exactly as
you've done in this example.</p>
</div>
</div>
<div class="section" id="the-response-object">
<span id="index-14"></span><h2>The Response Object<a class="headerlink" href="#the-response-object" title="Permalink to this headline">¶</a></h2>
<p>The only requirement for a controller is to return a <tt class="docutils literal"><code>Response</code></tt> object. The
<tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/2.2/Symfony/Component/HttpFoundation/Response.html" title="Symfony\Component\HttpFoundation\Response">Response</a></code></tt> class is a PHP
abstraction around the HTTP response - the text-based message filled with HTTP
headers and content that's sent back to the client:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="c1">// create a simple Response with a 200 status code (the default)</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s1">&#39;Hello &#39;</span><span class="o">.</span><span class="nv">$name</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>

<span class="c1">// create a JSON-response with a 200 status code</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="nb">json_encode</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">)));</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div></div>
<div class="admonition-wrapper">
<div class="tip"></div><div class="admonition admonition-tip"><p class="first admonition-title">Tip</p>
<p class="last">The <tt class="docutils literal"><code>headers</code></tt> property is a
<tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/2.2/Symfony/Component/HttpFoundation/HeaderBag.html" title="Symfony\Component\HttpFoundation\HeaderBag">HeaderBag</a></code></tt> object with several
useful methods for reading and mutating the <tt class="docutils literal"><code>Response</code></tt> headers. The
header names are normalized so that using <tt class="docutils literal"><code>Content-Type</code></tt> is equivalent
to <tt class="docutils literal"><code>content-type</code></tt> or even <tt class="docutils literal"><code>content_type</code></tt>.</p>
</div></div>
<div class="admonition-wrapper">
<div class="tip"></div><div class="admonition admonition-tip"><p class="first admonition-title">Tip</p>
<p>There are also special classes to make certain kinds of responses easier:</p>
<ul class="last simple">
<li>For JSON, there is <tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/2.2/Symfony/Component/HttpFoundation/JsonResponse.html" title="Symfony\Component\HttpFoundation\JsonResponse">JsonResponse</a></code></tt>.
See <a class="reference internal" href="../components/http_foundation/introduction.html#component-http-foundation-json-response"><em>Creating a JSON Response</em></a>.</li>
<li>For files, there is <tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/2.2/Symfony/Component/HttpFoundation/BinaryFileResponse.html" title="Symfony\Component\HttpFoundation\BinaryFileResponse">BinaryFileResponse</a></code></tt>.
See <a class="reference internal" href="../components/http_foundation/introduction.html#component-http-foundation-serving-files"><em>Serving Files</em></a>.</li>
</ul>
</div></div>
</div>
<div class="section" id="the-request-object">
<span id="index-15"></span><h2>The Request Object<a class="headerlink" href="#the-request-object" title="Permalink to this headline">¶</a></h2>
<p>Besides the values of the routing placeholders, the controller also has access
to the <tt class="docutils literal"><code>Request</code></tt> object when extending the base <tt class="docutils literal"><code>Controller</code></tt> class:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$request</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getRequest</span><span class="p">();</span>

<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">isXmlHttpRequest</span><span class="p">();</span> <span class="c1">// is it an Ajax request?</span>

<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getPreferredLanguage</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;en&#39;</span><span class="p">,</span> <span class="s1">&#39;fr&#39;</span><span class="p">));</span>

<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">query</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;page&#39;</span><span class="p">);</span> <span class="c1">// get a $_GET parameter</span>

<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;page&#39;</span><span class="p">);</span> <span class="c1">// get a $_POST parameter</span>
</pre></div>
</td></tr></table></div></div>
<p>Like the <tt class="docutils literal"><code>Response</code></tt> object, the request headers are stored in a <tt class="docutils literal"><code>HeaderBag</code></tt>
object and are easily accessible.</p>
</div>
<div class="section" id="final-thoughts">
<h2>Final Thoughts<a class="headerlink" href="#final-thoughts" title="Permalink to this headline">¶</a></h2>
<p>Whenever you create a page, you'll ultimately need to write some code that
contains the logic for that page. In Symfony, this is called a controller,
and it's a PHP function that can do anything it needs in order to return
the final <tt class="docutils literal"><code>Response</code></tt> object that will be returned to the user.</p>
<p>To make life easier, you can choose to extend a base <tt class="docutils literal"><code>Controller</code></tt> class,
which contains shortcut methods for many common controller tasks. For example,
since you don't want to put HTML code in your controller, you can use
the <tt class="docutils literal"><code>render()</code></tt> method to render and return the content from a template.</p>
<p>In other chapters, you'll see how the controller can be used to persist and
fetch objects from a database, process form submissions, handle caching and
more.</p>
</div>
<div class="section" id="learn-more-from-the-cookbook">
<h2>Learn more from the Cookbook<a class="headerlink" href="#learn-more-from-the-cookbook" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../cookbook/controller/error_pages.html"><em>How to customize Error Pages</em></a></li>
<li><a class="reference internal" href="../cookbook/controller/service.html"><em>How to define Controllers as Services</em></a></li>
</ul>
</div>
</div>

    </div>

            <div class="navigation">
                            <a accesskey="P" title="Creating Pages in Symfony2" href="page_creation.html">
                    &laquo;&nbsp;Creating Pages in Symfony2
                </a>
                        <span class="separator">|</span>                            <a accesskey="N" title="Routing" href="routing.html">
                    Routing&nbsp;&raquo;
                </a>
                    </div>

            <div class="box_hr"><hr /></div>

                                                                                </div>
                                                            </div>
                        
                        
                                                    <div class="box_relative_content">
    <div class="relative_content_box_columns clear_fix">
        <div class="column_01">
            <h2 class="title_05">NEWS FROM THE BLOG</h2>

<ul class="event_list">
            <li>
            <h3>
                <a href="/blog/symfony-2-3-schedule-update">
                    Symfony 2.3 schedule update<br />
                    <span class="place_date">April 30, 2013</span>
                </a>
            </h3>
        </li>
            <li>
            <h3>
                <a href="/blog/a-week-of-symfony-330-22-28-april-2013">
                    A week of symfony #330 (22-&gt;28 April 2013)<br />
                    <span class="place_date">April 28, 2013</span>
                </a>
            </h3>
        </li>
            <li>
            <h3>
                <a href="/blog/new-in-symfony-2-3-new-validators">
                    New in Symfony 2.3: New validators<br />
                    <span class="place_date">April 25, 2013</span>
                </a>
            </h3>
        </li>
    </ul>

<div class="link_01">
    <a href="/blog/" class="png_fix">Visit Symfony's blog</a>
</div>
        </div>

        <div class="column_02">
                        <h2 class="title_05">IN THE NEWS</h2>


<div class="upcoming_event clear_fix">
    <div>
        <a href="http://portland2013.live.symfony.com/" target="_blank">
            <img style="width: 100px" src="http://live.symfony.com/bundles/sensiosymfonylive/images/landing/sfl_portland.png" class="png_fix" alt="The Symfony Live Conference Portland 2013" />
        </a>
    </div>

    <div style="margin-top: 13px">
        <h3 style="font-size: 13px; font-family: 'Lucida Sans Unicode', 'Lucida Grande', Verdana, Arial, Helvetica, sans-serif">Announcing the next Symfony Live Conference 2013 in Portland</h3>
        <div style="margin-top: 5px">
            <a href="http://portland2013.live.symfony.com/registration/" class="non_extensible_button button_01">    <span class="border_l png_fix">
        <span class="border_r png_fix">
            <span class="btn_bg png_fix">
                REGISTER TODAY
            </span>
        </span>
    </span>
</a>
        </div>
    </div>
</div>

                    </div>

        <div class="column_03">
            <h2 class="title_05">UPCOMING TRAINING SESSIONS</h2>

<ul class="event_list">
        <li>
        <a href="http://trainings.sensiolabs.com/en/training/symfony-certification">
            Symfony2 Framework Certification
            <br />
            <span class="place_date">Cologne - 2013-04-26</span>
        </a>
    </li>
        <li>
        <a href="http://trainings.sensiolabs.com/en/training/getting-started-with-symfony2">
            Getting Started with Symfony2
            <br />
            <span class="place_date">Paris - 2013-05-13</span>
        </a>
    </li>
        <li>
        <a href="http://trainings.sensiolabs.com/en/training/getting-started-with-symfony2">
            Getting Started with Symfony2
            <br />
            <span class="place_date">Cologne - 2013-05-13</span>
        </a>
    </li>
    </ul>

<div class="link_01">
    <a href="http://trainings.sensiolabs.com/" class="png_fix">View all sessions</a>
</div>
        </div>
    </div>
</div>
                        
                    </div>
                            </div>

            
<div class="footer">
    <div class="content">
        <h2 class="title_02">
            <img src="/images/common/logo/logo_sf.png" alt="sf - Symfony" class="illustration_logo_footer png_fix"/> is a trademark of Fabien Potencier. All rights reserved.
        </h2>

        <div class="box_menu_footer clear_fix">
            <div class="menu_footer first">
                <h3 class="title_03"><a href="/what-is-symfony">What is Symfony?</a></h3>
                <ul class="list_menu_footer">
                    <li class="first"><a href="/symfony-at-a-glance">Symfony at a Glance</a></li>
<li><a href="/symfony-in-five-minutes">Symfony in 5 Minutes</a></li>
<li><a href="/elevator-pitches">Elevator Pitches</a></li>
<li><a href="/blog/category/case-studies">Case Studies</a></li>
<li><a href="/doc/current/contributing/community/releases.html">Versioning Policy</a></li>
<li><a href="/doc/current/contributing/community/releases.html#long-term-support-releases">Long Term Support</a></li>
<li><a href="/doc/current/contributing/code/security.html">Security Policy</a></li>
<li class="last"><a href="/doc/current/contributing/code/license.html">License</a></li>
                </ul>
            </div>

            <div class="menu_footer">
                <h3 class="title_03"><a href="/get_started">Get Started</a></h3>
                <ul class="list_menu_footer">
                    <li class="first"><a href="/download">Download Symfony</a></li>
<li><a href="/distributions">Symfony Distributions</a></li>
<li><a href="/components">Symfony Components</a></li>
<li><a href="/doc/current/quick_tour/the_big_picture.html">Quick Tour</a></li>
<li class="last"><a href="/legacy">symfony1 Legacy</a></li>
                </ul>

                <h3 class="title_03"><a href="/doc/current/index.html">Learn Symfony</a></h3>
                <ul class="list_menu_footer">
                    <li class="first selected"><a href="/doc/current/book/index.html">The Book</a></li>
<li><a href="/doc/current/cookbook/index.html">The Cookbook</a></li>
<li><a href="/doc/current/components/index.html">The Components</a></li>
<li><a href="/doc/current/reference/index.html">Reference</a></li>
<li><a href="/doc/current/glossary.html">Glossary</a></li>
<li><a href="/doc/current/genindex.html">Index</a></li>
<li><a href="/doc/current/bundles/index.html">Bundles</a></li>
<li><a href="/doc/master/cmf/index.html">Symfony CMF</a></li>
<li><a href="/doc/master/contributing/code/security.html#security-advisories">Security Advisories</a></li>
<li><a href="/legacy/doc">Docs for symfony 1.x</a></li>
<li><a href="/doc/current/contributing/index.html">Contributing</a></li>
<li><a href="/talks">Talks</a></li>
<li><a href="http://trainings.sensiolabs.com/">Trainings</a></li>
<li class="last"><a href="http://books.sensiolabs.com">Books</a></li>
                </ul>
            </div>

            <div class="menu_footer">
                <h3 class="title_03"><a href="/marketplace">Marketplace</a></h3>
                <ul class="list_menu_footer">
                </ul>

                <h3 class="title_03"><a href="/community">Community</a></h3>
                <ul class="list_menu_footer">
                    <li><a href="https://connect.sensiolabs.com/">SensioLabs Connect</a></li>
<li><a href="/irc">IRC channel</a></li>
<li><a href="/mailing-lists">Mailing lists</a></li>

<li><a href="http://forum.symfony-project.org/">Forum</a></li>
<li><a href="/doc/current/contributing/index.html">How to be involved</a></li>
                </ul>
            </div>

            <div class="menu_footer">
                <h3 class="title_03"><a href="/services">Services</a></h3>
                <ul class="list_menu_footer">
                    <li><a href="/services/list">Our services</a></li>
<li><a href="/services/guide#before">Starting a new project</a></li>
<li><a href="/services/guide#during">Struggling with your project</a></li>
<li><a href="http://sensiolabs.com/en/support/sensiolabs_support.html">Support</a></li>
<li><a href="/services/request">Contact us</a></li>
                </ul>
            </div>

            <div class="menu_footer">
                <h3 class="title_03"><a href="/blog/">Blog</a></h3>
                <ul class="list_menu_footer">
                    <li><a href="/events/"><em>Community Events</em></a></li>

    <li><a href="/blog/category/a-week-of-symfony">A week of symfony</a></li>
    <li><a href="/blog/category/call-the-expert">Call the expert</a></li>
    <li><a href="/blog/category/case-studies">Case studies</a></li>
    <li><a href="/blog/category/community">Community</a></li>
    <li><a href="/blog/category/documentation">Documentation</a></li>
    <li><a href="/blog/category/living-on-the-edge">Living on the edge</a></li>
    <li><a href="/blog/category/plugins">Plugins</a></li>
    <li><a href="/blog/category/releases">Releases</a></li>
    <li><a href="/blog/category/security-advisories">Security Advisories</a></li>
    <li><a href="/blog/category/tutorials">Tutorials</a></li>
                </ul>
            </div>

            <div class="menu_footer">
                <h3 class="title_03"><a href="/about">About</a></h3>
                <ul class="list_menu_footer">
                    <li><a href="http://www.sensiolabs.com/">Sensio Labs</a></li>
<li><a href="/contributors">Contributors</a></li>
<li><a href="/trademark">Trademark &amp; Logo Policy</a></li>
<li><a href="/logo">Logo</a></li>
<li><a href="http://sensiolabs.com/recrutement/rejoignez_nous.html">Jobs</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
        </div>

        <script type="text/javascript">
            (function(w, d, s) {
                function go() {
                    var js, fjs = d.getElementsByTagName(s)[0], load = function(url, id) {
                        if (d.getElementById(id)) {return;}
                        js = d.createElement(s); js.src = url; js.id = id;
                        fjs.parentNode.insertBefore(js, fjs);
                    };
                    load('https://connect.sensiolabs.com/sln.js?customize_url=http://symfony.com/sln_customiser.js', 'sln_bar');
                }
                if (w.addEventListener) { w.addEventListener("load", go, false); }
                else if (w.attachEvent) { w.attachEvent("onload",go); }
            } (window, document, 'script'));
        </script>
                    </body>
</html>
